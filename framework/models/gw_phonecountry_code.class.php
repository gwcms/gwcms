<?php

class GW_PhoneCountry_code extends GW_User 
{


	public $table = 'gw_phonecountry_codes';
	
	
	function getCountryByPhone($nr)
	{
		$nr = (string)$nr;
		
		$digits=[];
		
		for($i=0;$i<5;$i++)
			$digits[] = substr ($nr, 0, $i+1);
		
	
		$incond = GW::DB()->inCondition('code', $digits);
		
		
		$q="SELECT * FROM gw_phonecountry_codes WHERE  $incond ORDER BY  `code` DESC LIMIT 1";
		
		$rez = $this->getDB()->fetch_row($q);
		
		return $rez['country'];
	}
}


/*


CREATE TABLE IF NOT EXISTS `gw_phonecountry_codes` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `country` char(32) DEFAULT NULL,
  `code` int(8) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=266 ;


INSERT INTO `gw_phonecountry_codes` (`id`, `country`, `code`) VALUES
(1, 'Abkhazia', 7840),
(2, 'Afghanistan', 93),
(3, 'Albania', 355),
(4, 'Algeria', 213),
(5, 'American Samoa', 1684),
(6, 'ANAC Satellite', 857),
(7, 'Andorra', 376),
(8, 'Angola', 244),
(9, 'Anguilla', 1264),
(10, 'Antigua and Barbuda', 1268),
(11, 'Argentina', 54),
(12, 'Armenia', 374),
(13, 'Aruba', 297),
(14, 'Ascension', 247),
(15, 'Australia', 61),
(16, 'Australian External Territories', 672),
(17, 'Austria', 43),
(18, 'Azerbaijan', 994),
(19, 'Bahamas', 1242),
(20, 'Bahrain', 973),
(21, 'Bangladesh', 880),
(22, 'Barbados', 1246),
(23, 'Barbuda', 1268),
(24, 'Belarus', 375),
(25, 'Belgium', 32),
(26, 'Belize', 501),
(27, 'Benin', 229),
(28, 'Bermuda', 1441),
(29, 'Bhutan', 975),
(30, 'Bolivia', 591),
(31, 'Bosnia and Herzegovina', 387),
(32, 'Botswana', 267),
(33, 'Brazil', 55),
(34, 'British Indian Ocean Territory', 246),
(35, 'British Virgin Islands', 1284),
(36, 'Brunei', 673),
(37, 'Bulgaria', 359),
(38, 'Burkina Faso', 226),
(39, 'Burundi', 257),
(40, 'Cambodia', 855),
(41, 'Cameroon', 237),
(42, 'Canada', 1),
(43, 'Cape Verde', 238),
(44, 'Cayman Islands', 1345),
(45, 'Central African Republic', 236),
(46, 'Chad', 235),
(47, 'Chatham Island (New Zealand)', 64),
(48, 'Chile', 56),
(49, 'China', 86),
(50, 'Christmas Island', 61),
(51, 'Cocos-Keeling Islands', 61),
(52, 'Colombia', 57),
(53, 'Comoros', 269),
(54, 'Congo', 242),
(55, 'Congo - Brazzaville', 242),
(56, 'Congo, Dem. Rep. of (Zaire)', 243),
(57, 'Congo - Kinshasa', 243),
(58, 'Cook Islands', 682),
(59, 'Costa Rica', 506),
(60, 'Ivory Coast', 225),
(61, 'Croatia', 385),
(62, 'Cuba', 53),
(63, 'Cuba (Guantanamo Bay)', 5399),
(64, 'Curaçao', 599),
(65, 'Cyprus', 357),
(66, 'Czech Republic', 420),
(67, 'Denmark', 45),
(68, 'Diego Garcia', 246),
(69, 'Djibouti', 253),
(70, 'Dominica', 1767),
(71, 'Dominican Republic', 1809),
(72, 'East Timor', 670),
(73, 'Easter Island', 56),
(74, 'Ecuador', 593),
(75, 'Egypt', 20),
(76, 'El Salvador', 503),
(77, 'Ellipso (Mobile Satellite servic', 8812),
(78, 'EMSAT (Mobile Satellite service)', 88213),
(79, 'Equatorial Guinea', 240),
(80, 'Eritrea', 291),
(81, 'Estonia', 372),
(82, 'Ethiopia', 251),
(83, 'Falkland Islands', 500),
(84, 'Faroe Islands', 298),
(85, 'Fiji', 679),
(86, 'Finland', 358),
(87, 'France', 33),
(88, 'French Antilles', 596),
(89, 'French Guiana', 594),
(90, 'French Polynesia', 689),
(91, 'Gabon', 241),
(92, 'Gambia', 220),
(93, 'Georgia', 995),
(94, 'Germany', 49),
(95, 'Ghana', 233),
(96, 'Gibraltar', 350),
(97, 'Global Mobile Satellite System (', 881),
(98, 'Globalstar (Mobile Satellite Ser', 8818),
(99, 'Greece', 30),
(100, 'Greenland', 299),
(101, 'Grenada', 1473),
(102, 'Guadeloupe', 590),
(103, 'Guam', 1671),
(104, 'Guantanamo Bay', 5399),
(105, 'Guatemala', 502),
(106, 'Guinea', 224),
(107, 'Guinea-Bissau', 245),
(108, 'Guyana', 592),
(109, 'Haiti', 509),
(110, 'Honduras', 504),
(111, 'Hong Kong', 852),
(112, 'Hungary', 36),
(113, 'Iceland', 354),
(114, 'ICO Global (Mobile Satellite Ser', 8810),
(115, 'India', 91),
(116, 'Indonesia', 62),
(117, 'Inmarsat SNAC', 870),
(118, 'International Freephone Service', 800),
(119, 'International Shared Cost Servic', 808),
(120, 'Iran', 98),
(121, 'Iraq', 964),
(122, 'Ireland', 353),
(123, 'Iridium (Mobile Satellite servic', 8816),
(124, 'Israel', 972),
(125, 'Italy', 39),
(126, 'Jamaica', 1876),
(127, 'Japan', 81),
(128, 'Jordan', 962),
(129, 'Kazakhstan', 76),
(130, 'Kenya', 254),
(131, 'Kiribati', 686),
(132, 'North Korea', 850),
(133, 'South Korea', 82),
(134, 'Kuwait', 965),
(135, 'Kyrgyzstan', 996),
(136, 'Laos', 856),
(137, 'Latvia', 371),
(138, 'Lebanon', 961),
(139, 'Lesotho', 266),
(140, 'Liberia', 231),
(141, 'Libya', 218),
(142, 'Liechtenstein', 423),
(143, 'Lithuania', 370),
(144, 'Luxembourg', 352),
(145, 'Macau SAR China', 853),
(146, 'Macedonia', 389),
(147, 'Madagascar', 261),
(148, 'Malawi', 265),
(149, 'Malaysia', 60),
(150, 'Maldives', 960),
(151, 'Mali', 223),
(152, 'Malta', 356),
(153, 'Marshall Islands', 692),
(154, 'Martinique', 596),
(155, 'Mauritania', 222),
(156, 'Mauritius', 230),
(157, 'Mayotte', 262),
(158, 'Mexico', 52),
(159, 'Micronesia', 691),
(160, 'Midway Island', 1808),
(161, 'Moldova', 373),
(162, 'Monaco', 377),
(163, 'Mongolia', 976),
(164, 'Montenegro', 382),
(165, 'Montserrat', 1664),
(166, 'Morocco', 212),
(167, 'Mozambique', 258),
(168, 'Myanmar', 95),
(169, 'Namibia', 264),
(170, 'Nauru', 674),
(171, 'Nepal', 977),
(172, 'Netherlands', 31),
(173, 'Netherlands Antilles', 599),
(174, 'Nevis', 1869),
(175, 'New Caledonia', 687),
(176, 'New Zealand', 64),
(177, 'Nicaragua', 505),
(178, 'Niger', 227),
(179, 'Nigeria', 234),
(180, 'Niue', 683),
(181, 'Norfolk Island', 672),
(182, 'Northern Mariana Islands', 1670),
(183, 'Norway', 47),
(184, 'Oman', 968),
(185, 'Pakistan', 92),
(186, 'Palau', 680),
(187, 'Palestinian territories', 970),
(188, 'Panama', 507),
(189, 'Papua New Guinea', 675),
(190, 'Paraguay', 595),
(191, 'Peru', 51),
(192, 'Philippines', 63),
(193, 'Poland', 48),
(194, 'Portugal', 351),
(195, 'Puerto Rico', 1787),
(196, 'Qatar', 974),
(197, 'Réunion', 262),
(198, 'Romania', 40),
(199, 'Russia', 7),
(200, 'Rwanda', 250),
(201, 'Saint Barthélemy', 590),
(202, 'Saint Helena', 290),
(203, 'Saint Kitts and Nevis', 1869),
(204, 'Saint Lucia', 1758),
(205, 'Saint Martin', 590),
(206, 'Saint Pierre and Miquelon', 508),
(207, 'Saint Vincent and the Grenadines', 1784),
(208, 'Samoa', 685),
(209, 'San Marino', 378),
(210, 'São Tomé and Príncipe', 239),
(211, 'Saudi Arabia', 966),
(212, 'Senegal', 221),
(213, 'Serbia', 381),
(214, 'Seychelles', 248),
(215, 'Sierra Leone', 232),
(216, 'Singapore', 65),
(217, 'Sint Maarten', 599),
(218, 'Slovakia', 421),
(219, 'Slovenia', 386),
(220, 'Solomon Islands', 677),
(221, 'Somalia', 252),
(222, 'South Africa', 27),
(223, 'South Georgia and the South Sand', 500),
(224, 'Spain', 34),
(225, 'Sri Lanka', 94),
(226, 'Sudan', 249),
(227, 'Suriname', 597),
(228, 'Swaziland', 268),
(229, 'Sweden', 46),
(230, 'Switzerland', 41),
(231, 'Syria', 963),
(232, 'Taiwan', 886),
(233, 'Tajikistan', 992),
(234, 'Tanzania', 255),
(235, 'Thailand', 66),
(236, 'Thuraya (Mobile Satellite servic', 88216),
(237, 'Timor-Leste', 670),
(238, 'Togo', 228),
(239, 'Tokelau', 690),
(240, 'Tonga', 676),
(241, 'Trinidad and Tobago', 1868),
(242, 'Tunisia', 216),
(243, 'Turkey', 90),
(244, 'Turkmenistan', 993),
(245, 'Turks and Caicos Islands', 1649),
(246, 'Tuvalu', 688),
(247, 'Uganda', 256),
(248, 'Ukraine', 380),
(249, 'United Arab Emirates', 971),
(250, 'United Kingdom', 44),
(251, 'United States', 1),
(252, 'Universal Personal Telecommunica', 878),
(253, 'Uruguay', 598),
(254, 'U.S. Virgin Islands', 1340),
(255, 'Uzbekistan', 998),
(256, 'Vanuatu', 678),
(257, 'Vatican', 39066),
(258, 'Venezuela', 58),
(259, 'Vietnam', 84),
(260, 'Wake Island', 1808),
(261, 'Wallis and Futuna', 681),
(262, 'Yemen', 967),
(263, 'Zambia', 260),
(264, 'Zanzibar', 255),
(265, 'Zimbabwe', 263);


 */
